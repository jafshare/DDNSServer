# 通过阿里云DDNS实现外网访问内网

最近本人需要使用远程桌面连接家里的电脑，正好家里的光宽是有公网ip的，而且手头有一个多余的阿里云域名，所以正好可以通过DDNS来实现远程访问。

## 1、DDNS简介

**DDNS(Dynamic Domain Name Server)**是动态域名服务的缩写,它是将用户的动态ip映射到一个固定的域名解析服务器上。通俗来讲就是可以通过一个固定的域名来访问一台ip随时变化的主机。

至于ip为什么会发生变化，就要从IPv4讲起了，起初，每个互联网用户都是可以分配到一个公网的ip(公网ip意味着其他用户可以直接通过该ip直接访问)，但是由于互联网的发展，用户的急剧增加，公网ip随着分配变得越来越少，直至耗尽。

所以到了现在，家庭用户拥有公网ip的变得越来越少了，运营商通过NAT技术将用户变成了内网ip(其他用户无法直接通过内网ip直接访问)。但是公网ip是有限的，不可能固定分配一个公网ip给用户，所以公网地址也是随机分配的，这对于需要使用固定ip远程连接或者访问服务器的用户来说影响极大，解决这个问题就需要使用DDNS将动态的ip绑定到固定的域名上。**这样不仅解决的ip的随机改变，同时域名比起ip来更容易记忆。**

**小知识**: IPv4预留了3个内网网段

- A类 10.0.0.0-10.255.255.255
- B类 172.16.0.0-172.31.255.255
- C类 192.168.0.0-192.168.255.255

## 2、准备

1. 一个公网的ip,
2. 一个域名(阿里云或者其他域名提供商都可以购买)

## 3、外网访问内网流程

- 利用阿里云的DNS解析服务，这是大概的流程:

  ![1553945131077](.\images\1553945131077.png)

#### 4、阿里云的`Python SDK`

- 通过阿里云的给的API接口直接操作阿里云的服务，详情查看https://help.aliyun.com/product/108102.html

- 本人使用Python3，所以首先安装`SDK`核心库

  ```bash
  pip install aliyun-python-sdk-core-v3
  ```

  然后是dns解析库

  ```
  aliyun-python-sdk-alidns
  ```

- 如何获取AccessKey可以看https://help.aliyun.com/document_detail/66453.html?spm=a2c4g.11186623.2.12.7f464389tNFlYf

5、